"use strict";(self.webpackChunkgoose_track=self.webpackChunkgoose_track||[]).push([[464],{4464:function(e,a,n){n.r(a),n.d(a,{default:function(){return Z}});var r=n(5861),t=n(9439),s=n(4687),c=n.n(s),o=n(2791),l=n(9434),_=n(4746),i=n(6129),u=n(2426),m=n.n(u),d=n(5705),p=n(6727),h=p.Ry().shape({userName:p.Z_().min(3,"Too Short!").max(36,"Too Long!").required("Required"),email:p.Z_().email("Invalid email").required("Required"),phone:p.Z_().matches(/^\+380\d{9}$/,"Phone number must be in the format +380XXXXXXXXX"),telegram:p.Z_().matches(/^[a-zA-Z0-9_@]*$/,'value contains only latin letters, numbers, underscore and "@" symbol'),avatar:p.Z_("Invalid avatar"),birthday:p.hT()}),f={user_page:"accountPage_user_page__2b2f0",user_page__avatar_container:"accountPage_user_page__avatar_container__x8xHg",user_page__avatar:"accountPage_user_page__avatar__X7iSu",avatar_upload_btn:"accountPage_avatar_upload_btn__c0sNy",user_page__name:"accountPage_user_page__name__jpU+G",user_page__role:"accountPage_user_page__role__P3cpO",username_form:"accountPage_username_form__6g2oi",username_form__label:"accountPage_username_form__label__Zr8sg",username_form_input:"accountPage_username_form_input__UFHqo",is_invalid:"accountPage_is_invalid__Tz6E4","username_form-input--last":"accountPage_username_form-input--last__H1Ue1",username_form__submit:"accountPage_username_form__submit__9Vc2l","username__form-submit":"accountPage_username__form-submit__R8lsZ",invalid_feedback:"accountPage_invalid_feedback__xwEBF",date_picker:"accountPage_date_picker__Zbqb-"};var g=n.p+"static/media/ph_user.24aa63a90eb019bd4fe5b5f4ba8aaf48.svg",b=n(1413),v=n(9513),N=n.n(v),x=n(184),y=(new Date).toISOString().split("T")[0],j=function(e){e.name;var a=e.birthday,n=(0,d.U$)("date"),r=(0,t.Z)(n,3),s=r[0],c=r[1],l=r[2],_=c.value,i=l.setValue,u=(0,o.useState)(m()()),p=(0,t.Z)(u,2),h=p[0],f=p[1],g=(0,o.useCallback)((function(e){var a=m()(e).format("dddd");return"Saturday"===a||"Sunday"===a}),[]),v=(0,o.useCallback)((function(e){var a=[],n=m()(h).startOf("month"),r=m()(h).endOf("month");return(m()(e).isBefore(n)||m()(e).isAfter(r))&&a.push("outside-month"),g(e)&&a.push("highlighted-weekend"),a.join(" ")}),[h,g]),j=(0,o.useCallback)((function(e){f(m()(e))}),[]),k=(0,o.useCallback)((function(){f(_||new Date(a||y))}),[_,a]);return(0,x.jsx)(N(),(0,b.Z)((0,b.Z)({},s),{},{selected:_||new Date(a||y),onChange:function(e){return i(e)},onMonthChange:j,dayClassName:v,calendarStartDay:1,placeholderText:a||"Choose a date",formatWeekDay:function(e){return e.charAt(0)},showPopperArrow:!1,onCalendarClose:k}))},k=n(1686),P=["userName","email","birthday","phone","telegram"],S=function(){var e=(0,l.I0)(),a=(0,l.v9)(_.mE),n=(0,o.useState)(null),s=(0,t.Z)(n,2),u=s[0],p=s[1],b=(0,o.useState)(null),v=(0,t.Z)(b,2),N=v[0],y=v[1],S={phone:a.phone||"",telegram:a.telegram||"",userName:a.userName,email:a.email,birthday:a.birthday,avatarUpload:!1},Z=function(){var a=(0,r.Z)(c().mark((function a(n){var r;return c().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r=new FormData,P.forEach((function(e){if(n[e])if("birthday"!==e)r.append(e,n[e]);else{var a=m()(n[e]).format("YYYY-MM-DD");r.append("birthday",a)}})),N&&r.append("avatar",N),a.prev=3,a.next=6,e((0,i.Lj)(r));case 6:k.Notify.success("Success.Info updated."),a.next=13;break;case 9:a.prev=9,a.t0=a.catch(3),console.log(a.t0),k.Notify.error("Error.Something gone wrong.");case 13:case"end":return a.stop()}}),a,null,[[3,9]])})));return function(e){return a.apply(this,arguments)}}();return(0,x.jsx)("section",{className:"".concat(f.user_page),children:(0,x.jsx)(d.J9,{initialValues:S,validationSchema:h,onSubmit:Z,enableReinitialize:!0,children:function(e){return(0,x.jsxs)(d.l0,{children:[(0,x.jsxs)("div",{className:"".concat(f.user_page__avatar_container),children:[(0,x.jsx)("img",{className:"".concat(f.user_page__avatar),src:u||a.avatar||g,alt:"User Avatar"}),(0,x.jsxs)("div",{className:"".concat(f.avatar_upload_container),children:[(0,x.jsx)(d.gN,{id:"avatar-upload",name:"avatar",type:"file",accept:"image/*",onChange:function(a){return function(e,a){var n=e.target.files[0];y(n);var r=new FileReader,t=new Blob([n],{type:n.type});r.readAsDataURL(t),r.onload=function(){p(r.result),a("avatar-upload",!!n)}}(a,e.setFieldValue)},style:{display:"none"}}),(0,x.jsx)("label",{htmlFor:"avatar-upload",className:"".concat(f.avatar_upload_btn)})]}),(0,x.jsx)("h3",{className:"".concat(f.user_page__name),children:a.userName||"Username"}),(0,x.jsx)("p",{className:"".concat(f.user_page__role),children:"User"})]}),(0,x.jsxs)("div",{className:"".concat(f.username_form),children:[(0,x.jsxs)("label",{htmlFor:"userName",className:"".concat(f.username_form__label),children:["Username",(0,x.jsx)(d.gN,{name:"userName",type:"text",className:"".concat(f.username_form_input)+(e.errors.userName&&e.touched.userName?f.is_invalid:""),placeholder:"User name"}),(0,x.jsx)(d.Bc,{name:"userName",component:"div",className:f.invalid_feedback})]}),(0,x.jsxs)("label",{htmlFor:"birthday",className:"".concat(f.username_form__label),children:["Birthday:",(0,x.jsx)(j,{name:"birthday",birthday:e.values.birthday,className:f.my_date_picker}),(0,x.jsx)(d.Bc,{name:"birthday",component:"div",className:f.invalid_feedback})]}),(0,x.jsxs)("label",{htmlFor:"email",className:"".concat(f.username_form__label),children:["Email Address",(0,x.jsx)(d.gN,{name:"email",type:"email",className:"".concat(f.username_form_input)}),(0,x.jsx)(d.Bc,{name:"email",component:"div",className:f.invalid_feedback})]}),(0,x.jsxs)("label",{htmlFor:"phone",className:"".concat(f.username_form__label),children:["Phone:",(0,x.jsx)(d.gN,{className:"".concat(f.username_form_input),id:"phone",name:"phone",type:"text",placeholder:"Enter your phone"}),(0,x.jsx)(d.Bc,{name:"phone",component:"div",className:f.invalid_feedback})]}),(0,x.jsxs)("label",{htmlFor:"telegram",className:"".concat(f.username_form__label),children:["Telegram:",(0,x.jsx)(d.gN,{className:"".concat(f.username_form_input),id:"telegram",name:"telegram",type:"text",placeholder:"Enter your Telegram link"}),(0,x.jsx)(d.Bc,{name:"telegram",component:"div",className:f.invalid_feedback})]}),(0,x.jsx)("button",{type:"submit",className:"".concat(f.username_form__submit),disabled:e.isSubmitting||!e.touched||!e.dirty,children:"Save Changes"})]})]})}})})};function Z(){return(0,x.jsx)(S,{})}}}]);
//# sourceMappingURL=464.f2c5669e.chunk.js.map